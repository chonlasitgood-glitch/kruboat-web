<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KruBoat Projects - ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4MQ3GL6CTB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-4MQ3GL6CTB');
    </script>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöÄ</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Sarabun', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        'gh-bg': '#0d1117',
                        'gh-card': '#161b22',
                        'gh-border': '#30363d',
                        'gh-text': '#c9d1d9',
                        'gh-text-sec': '#8b949e',
                        'gh-link': '#58a6ff',
                        'gh-btn': '#21262d',
                        'gh-btn-hover': '#30363d',
                        'gh-green': '#238636',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0d1117; color: #c9d1d9; }
        .repo-card:hover { border-color: #8b949e; }
        
        /* Contribution Graph Grid */
        .contribution-grid {
            display: grid;
            grid-template-rows: repeat(7, 10px);
            grid-auto-flow: column;
            gap: 3px;
        }
        .contrib-box { width: 10px; height: 10px; border-radius: 2px; }
        .c-0 { background-color: #161b22; }
        .c-1 { background-color: #0e4429; }
        .c-2 { background-color: #006d32; }
        .c-3 { background-color: #26a641; }
        .c-4 { background-color: #39d353; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0d1117; }
        ::-webkit-scrollbar-thumb { background: #30363d; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #58a6ff; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navbar (Consistent with Main Site but Dark Mode) -->
    <nav class="bg-[#161b22] border-b border-[#30363d] sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="/" class="text-xl font-bold text-white flex items-center gap-2">
                <i class="fa-brands fa-github text-3xl"></i> 
                <span class="font-mono">KruBoat<span class="text-[#58a6ff]">.Portfolio</span></span>
            </a>
            
            <div class="hidden md:flex space-x-6 text-sm font-semibold">
                <a href="/" class="text-gray-300 hover:text-white transition">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
                <a href="../student/" class="text-gray-300 hover:text-white transition">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>
                <a href="../app/" class="text-gray-300 hover:text-white transition">‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏£‡∏π‡πÇ‡∏ö‡πä‡∏ó</a>
                <a href="../library.html" class="text-gray-300 hover:text-white transition">‡∏Ñ‡∏•‡∏±‡∏á‡πÇ‡∏Ñ‡πâ‡∏î</a>
            </div>

            <!-- Profile Dropdown (Mock) -->
            <div class="flex items-center gap-3">
                <div class="relative">
                    <img src="https://firebasestorage.googleapis.com/v0/b/kruboat-web.firebasestorage.app/o/kruboat.com-profile.JPG?alt=media&token=859324c7-8a3d-401b-acfa-f46f256b3122" class="w-8 h-8 rounded-full border border-gray-600 cursor-pointer">
                    <span class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-[#0d1117] rounded-full"></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 flex-grow">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            
            <!-- 1. LEFT SIDEBAR: PROFILE -->
            <div class="md:col-span-1 space-y-6">
                <!-- Profile Image -->
                <div class="relative group">
                    <img src="https://firebasestorage.googleapis.com/v0/b/kruboat-web.firebasestorage.app/o/kruboat.com-profile.JPG?alt=media&token=859324c7-8a3d-401b-acfa-f46f256b3122" class="w-full max-w-[280px] rounded-full border-2 border-[#30363d] shadow-xl mx-auto md:mx-0 group-hover:scale-105 transition duration-300">
                    <div class="absolute bottom-10 right-4 bg-[#161b22] border border-[#30363d] p-2 rounded-full text-xl shadow-sm hidden md:block">
                        üéØ
                    </div>
                </div>

                <!-- Bio Info -->
                <div>
                    <h1 class="text-3xl font-bold text-white">KruBoat</h1>
                    <p class="text-xl text-[#8b949e] font-light">Chonlasit Wichainpan</p>
                </div>

                <div class="text-[#c9d1d9] leading-relaxed">
                    üë®‚Äçüè´ Teacher & Developer <br>
                    üíª Full Stack (JS, Firebase) <br>
                    üéì Creating EdTech Solutions
                </div>

                <button class="w-full bg-[#21262d] border border-[#30363d] text-white py-1.5 rounded-md font-semibold text-sm hover:bg-[#30363d] transition">
                    Follow
                </button>

                <!-- Details -->
                <div class="text-sm text-[#8b949e] space-y-2">
                    <div class="flex items-center gap-2"><i class="fa-solid fa-users w-4 text-center"></i> <span>1.2k followers ¬∑ 50 following</span></div>
                    <div class="flex items-center gap-2"><i class="fa-solid fa-location-dot w-4 text-center"></i> <span>Roi Et, Thailand</span></div>
                    <div class="flex items-center gap-2"><i class="fa-solid fa-envelope w-4 text-center"></i> <a href="mailto:chonlasitgood@gmail.com" class="hover:text-[#58a6ff]">chonlasitgood@gmail.com</a></div>
                    <div class="flex items-center gap-2"><i class="fa-solid fa-link w-4 text-center"></i> <a href="https://www.kruboat.com" class="hover:text-[#58a6ff]">www.kruboat.com</a></div>
                </div>

                <hr class="border-[#30363d]">

                <!-- Achievements / Tech Stack -->
                <div>
                    <h3 class="font-bold text-white mb-3">Tech Stack</h3>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-2 py-1 bg-[#161b22] border border-[#30363d] rounded-full text-xs text-[#58a6ff] font-mono">JavaScript</span>
                        <span class="px-2 py-1 bg-[#161b22] border border-[#30363d] rounded-full text-xs text-yellow-400 font-mono">Firebase</span>
                        <span class="px-2 py-1 bg-[#161b22] border border-[#30363d] rounded-full text-xs text-cyan-400 font-mono">Tailwind</span>
                        <span class="px-2 py-1 bg-[#161b22] border border-[#30363d] rounded-full text-xs text-orange-400 font-mono">HTML5</span>
                        <span class="px-2 py-1 bg-[#161b22] border border-[#30363d] rounded-full text-xs text-purple-400 font-mono">Arduino</span>
                    </div>
                </div>
            </div>

            <!-- 2. RIGHT CONTENT: PROJECTS -->
            <div class="md:col-span-3">
                
                <!-- Tab Menu -->
                <div class="flex gap-6 border-b border-[#30363d] mb-6 overflow-x-auto">
                    <a href="#" class="py-3 px-1 border-b-2 border-[#f78166] font-semibold text-white flex items-center gap-2 whitespace-nowrap">
                        <i class="fa-solid fa-book-bookmark"></i> Overview
                    </a>
                    <a href="#" class="py-3 px-1 border-b-2 border-transparent text-[#8b949e] hover:text-white flex items-center gap-2 whitespace-nowrap">
                        <i class="fa-solid fa-laptop-code"></i> Projects <span class="bg-[#30363d] px-2 rounded-full text-xs py-0.5">12</span>
                    </a>
                    <a href="#" class="py-3 px-1 border-b-2 border-transparent text-[#8b949e] hover:text-white flex items-center gap-2 whitespace-nowrap">
                        <i class="fa-solid fa-star"></i> Stars <span class="bg-[#30363d] px-2 rounded-full text-xs py-0.5">48</span>
                    </a>
                </div>

                <!-- Pinned Projects -->
                <div class="mb-10">
                    <div class="flex justify-between items-end mb-4">
                        <h2 class="text-base text-[#c9d1d9]">Pinned Projects</h2>
                        <span class="text-xs text-[#58a6ff] cursor-pointer hover:underline">Customize your pins</span>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4" id="pinned-container">
                        <!-- Pinned Item Example (JS will populate real data or use static for now) -->
                        <div class="repo-card bg-[#0d1117] border border-[#30363d] rounded-md p-4 flex flex-col justify-between h-32 transition">
                            <div class="flex items-center justify-between">
                                <a href="#" class="text-[#58a6ff] font-bold hover:underline flex items-center gap-2">
                                    <i class="fa-regular fa-bookmark text-[#8b949e]"></i> RoomMate
                                </a>
                                <span class="text-xs border border-[#30363d] text-[#8b949e] px-2 py-0.5 rounded-full">Public</span>
                            </div>
                            <p class="text-xs text-[#8b949e] mt-2 line-clamp-2">Web Application ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠ ‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ß‡∏£ ‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô</p>
                            <div class="flex items-center gap-4 mt-auto text-xs text-[#8b949e]">
                                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-yellow-400"></span> JavaScript</span>
                                <span class="flex items-center gap-1"><i class="fa-regular fa-star"></i> 15</span>
                                <span class="flex items-center gap-1"><i class="fa-solid fa-code-fork"></i> 2</span>
                            </div>
                        </div>

                        <div class="repo-card bg-[#0d1117] border border-[#30363d] rounded-md p-4 flex flex-col justify-between h-32 transition">
                            <div class="flex items-center justify-between">
                                <a href="#" class="text-[#58a6ff] font-bold hover:underline flex items-center gap-2">
                                    <i class="fa-regular fa-bookmark text-[#8b949e]"></i> Scoreboard-Online
                                </a>
                                <span class="text-xs border border-[#30363d] text-[#8b949e] px-2 py-0.5 rounded-full">Public</span>
                            </div>
                            <p class="text-xs text-[#8b949e] mt-2 line-clamp-2">‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ Real-time</p>
                            <div class="flex items-center gap-4 mt-auto text-xs text-[#8b949e]">
                                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-orange-500"></span> HTML</span>
                                <span class="flex items-center gap-1"><i class="fa-regular fa-star"></i> 8</span>
                            </div>
                        </div>
                        
                        <!-- More slots will be filled by JS -->
                    </div>
                </div>

                <!-- Contribution Graph (Mock) -->
                <div class="mb-10">
                    <div class="flex justify-between items-center mb-2">
                        <h2 class="text-base text-[#c9d1d9]">1,240 contributions in the last year</h2>
                        <div class="text-xs text-[#8b949e]">Contribution settings</div>
                    </div>
                    <div class="border border-[#30363d] rounded-md p-4 bg-[#0d1117] overflow-x-auto">
                        <div class="contribution-grid" id="contrib-graph">
                            <!-- JS will generate squares -->
                        </div>
                        <div class="flex justify-between items-center mt-2 text-[10px] text-[#8b949e]">
                            <span>Learn how we count contributions</span>
                            <div class="flex items-center gap-1">
                                Less
                                <div class="w-3 h-3 bg-[#161b22] rounded-[2px]"></div>
                                <div class="w-3 h-3 bg-[#0e4429] rounded-[2px]"></div>
                                <div class="w-3 h-3 bg-[#006d32] rounded-[2px]"></div>
                                <div class="w-3 h-3 bg-[#26a641] rounded-[2px]"></div>
                                <div class="w-3 h-3 bg-[#39d353] rounded-[2px]"></div>
                                More
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity / All Projects -->
                <div>
                    <h2 class="text-base text-[#c9d1d9] mb-4">All Projects</h2>
                    <div class="flex gap-2 mb-4">
                        <input type="text" placeholder="Find a project..." class="bg-[#0d1117] border border-[#30363d] text-white text-sm rounded-md px-3 py-1.5 w-full focus:border-[#58a6ff] focus:outline-none">
                        <button class="bg-[#21262d] border border-[#30363d] text-[#c9d1d9] px-4 py-1.5 rounded-md text-sm font-semibold hover:bg-[#30363d] transition">Type</button>
                        <button class="bg-[#21262d] border border-[#30363d] text-[#c9d1d9] px-4 py-1.5 rounded-md text-sm font-semibold hover:bg-[#30363d] transition">Language</button>
                    </div>

                    <div id="project-list" class="space-y-4">
                        <div class="text-center text-[#8b949e] py-8">
                            <i class="fa-solid fa-spinner fa-spin text-2xl mb-2"></i>
                            <p>Loading projects...</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <footer class="border-t border-[#30363d] py-8 mt-auto bg-[#0d1117]">
        <div class="container mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-[#8b949e]">
            <div class="flex items-center gap-2">
                <i class="fa-brands fa-github text-xl text-[#8b949e]"></i>
                <span>&copy; 2025 KruBoat.com</span>
            </div>
            <div class="flex gap-4">
                <a href="#" class="hover:text-[#58a6ff] hover:underline">Terms</a>
                <a href="#" class="hover:text-[#58a6ff] hover:underline">Privacy</a>
                <a href="#" class="hover:text-[#58a6ff] hover:underline">Security</a>
                <a href="#" class="hover:text-[#58a6ff] hover:underline">Status</a>
                <a href="#" class="hover:text-[#58a6ff] hover:underline">Docs</a>
                <a href="#" class="hover:text-[#58a6ff] hover:underline">Contact</a>
            </div>
        </div>
    </footer>

    <!-- Script for Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Global Variable
        const globalConfig = JSON.parse(document.getElementById('firebase-config')?.textContent || '{}');
        
        // ‚ö†Ô∏è Config (‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ)
        const firebaseConfig = {
            apiKey: "AIzaSyAlfZHbCFxGK3p3nDoAPy3m9KqZzmX2s9I",
            authDomain: "kruboat-web.firebaseapp.com",
            projectId: "kruboat-web",
            storageBucket: "kruboat-web.firebasestorage.app",
            messagingSenderId: "61868765546",
            appId: "1:61868765546:web:683b18ddf68c89dd317513"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- 1. Generate Contribution Graph ---
        function generateGraph() {
            const container = document.getElementById('contrib-graph');
            const weeks = 53; // 1 year
            const days = 7;
            let html = '';
            
            for(let i=0; i<weeks * days; i++) {
                // Randomize activity level (0-4)
                // Probability: 0=70%, 1=15%, 2=8%, 3=5%, 4=2%
                const rand = Math.random();
                let level = 0;
                if(rand > 0.95) level = 4;
                else if(rand > 0.90) level = 3;
                else if(rand > 0.80) level = 2;
                else if(rand > 0.60) level = 1;
                
                html += `<div class="contrib-box c-${level}" title="Contribution Level: ${level}"></div>`;
            }
            container.innerHTML = html;
        }

        // --- 2. Load Projects ---
        async function loadProjects() {
            const listContainer = document.getElementById('project-list');
            try {
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å projects (‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á collection ‡πÉ‡∏´‡∏°‡πà‡∏ä‡∏∑‡πà‡∏≠ 'portfolio' ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)
                // ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ projects ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô
                const q = query(collection(db, "projects"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);
                
                let html = '';
                
                if (querySnapshot.empty) {
                    listContainer.innerHTML = '<div class="text-center text-[#8b949e]">No public repositories found.</div>';
                    return;
                }

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const lastUpdate = data.createdAt ? new Date(data.createdAt.toDate()).toLocaleDateString() : 'Recently';
                    
                    // Determine Language Color
                    let langColor = 'bg-gray-500';
                    let lang = 'HTML';
                    const category = data.category || 'Other';
                    
                    if(category.includes('Web')) { lang = 'JavaScript'; langColor = 'bg-yellow-400'; }
                    else if(category.includes('Game')) { lang = 'TypeScript'; langColor = 'bg-blue-500'; }
                    else if(category.includes('Utility')) { lang = 'Python'; langColor = 'bg-blue-300'; }

                    html += `
                    <div class="border-b border-[#30363d] py-6 flex justify-between items-start group">
                        <div class="w-full">
                            <div class="flex items-center gap-2 mb-1">
                                <a href="../library_detail.html?id=${doc.id}" class="text-xl font-bold text-[#58a6ff] hover:underline">${data.title}</a>
                                <span class="text-xs border border-[#30363d] text-[#8b949e] px-2 py-0.5 rounded-full">Public</span>
                            </div>
                            <p class="text-[#8b949e] text-sm mb-3 max-w-2xl">${data.description}</p>
                            
                            <div class="flex flex-wrap items-center gap-4 text-xs text-[#8b949e]">
                                <div class="flex items-center gap-1">
                                    <span class="w-3 h-3 rounded-full ${langColor}"></span> ${lang}
                                </div>
                                <div class="hover:text-[#58a6ff] cursor-pointer"><i class="fa-regular fa-star"></i> ${data.views || 0}</div>
                                <div class="hover:text-[#58a6ff] cursor-pointer"><i class="fa-solid fa-code-fork"></i> ${data.downloads || 0}</div>
                                <div>Updated on ${lastUpdate}</div>
                            </div>
                        </div>
                        <div class="hidden md:block">
                            <button class="bg-[#21262d] border border-[#30363d] text-[#c9d1d9] px-3 py-1 rounded-md text-xs font-bold hover:bg-[#30363d] flex items-center gap-1">
                                <i class="fa-regular fa-star"></i> Star
                            </button>
                        </div>
                    </div>`;
                });

                listContainer.innerHTML = html;

            } catch (error) {
                console.error(error);
                listContainer.innerHTML = '<div class="text-center text-red-400">Failed to load projects.</div>';
            }
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            generateGraph();
            loadProjects();
        });

    </script>
</body>
</html>