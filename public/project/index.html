<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KruBoat Project - Portfolio</title>
    <meta name="description" content="Portfolio ‡∏Ñ‡∏£‡∏π‡πÇ‡∏ö‡πä‡∏ó ‡∏ä‡∏•‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå - ‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå ‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô">
    
    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4MQ3GL6CTB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-4MQ3GL6CTB');
    </script>

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüíª</text></svg>">
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Sarabun', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        'gh-bg': '#0d1117',         
                        'gh-card': '#161b22',       
                        'gh-border': '#30363d',     
                        'gh-text': '#c9d1d9',       
                        'gh-text-sec': '#8b949e',   
                        'gh-link': '#58a6ff',       
                        'gh-btn': '#21262d',        
                        'gh-btn-hover': '#30363d',  
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0d1117; color: #c9d1d9; font-family: 'Sarabun', sans-serif; }
        .font-code { font-family: 'JetBrains Mono', monospace; }
        
        /* Tab Active State */
        .tab-active {
            border-bottom-color: #f78166 !important;
            color: #c9d1d9 !important;
            font-weight: 600;
        }
        .tab-item {
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        .tab-item:hover:not(.tab-active) {
            border-bottom-color: #8b949e;
            color: #c9d1d9;
        }

        /* Timeline Connector */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 24px;
            bottom: 0;
            left: 23px;
            width: 2px;
            background: #30363d;
            z-index: 0;
        }

        /* Markdown Style Container */
        .readme-container {
            border: 1px solid #30363d;
            border-radius: 6px;
            background-color: #0d1117;
        }
        .readme-header {
            background-color: #161b22;
            padding: 8px 16px;
            border-bottom: 1px solid #30363d;
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }
        .readme-content {
            padding: 24px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0d1117; }
        ::-webkit-scrollbar-thumb { background: #30363d; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #58a6ff; }
        
        /* Hide scrollbar for clean horizontal scroll */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- 1. Navbar -->
    <nav class="bg-[#161b22] border-b border-[#30363d] sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#" onclick="switchTab('overview')" class="text-xl font-bold text-white flex items-center gap-2 hover:opacity-80 transition">
                <!-- GitHub Icon Removed -->
                <span class="font-code font-bold">KruBoat.com<span class="text-[#58a6ff]">/Project</span></span>
            </a>
            
            <!-- Mobile Menu Toggle -->
            <button class="md:hidden text-white text-xl"><i class="fa-solid fa-bars"></i></button>
        </div>
    </nav>

    <!-- 2. Main Layout -->
    <main class="container mx-auto px-4 py-8 flex-grow">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            
            <!-- LEFT COLUMN: Profile Sidebar -->
            <div class="md:col-span-1 space-y-6">
                <!-- Profile Image -->
                <div class="relative group">
                    <div class="w-full max-w-[280px] aspect-square rounded-full border-2 border-[#30363d] shadow-xl mx-auto md:mx-0 overflow-hidden relative z-10 bg-[#0d1117]">
                         <img src="https://firebasestorage.googleapis.com/v0/b/kruboat-web.firebasestorage.app/o/kruboat.com-profile.JPG?alt=media&token=859324c7-8a3d-401b-acfa-f46f256b3122" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                    </div>
                </div>

                <!-- Bio Text -->
                <div>
                    <h1 class="text-2xl lg:text-3xl font-bold text-white">KruBoat</h1>
                    <p class="text-lg text-[#8b949e] font-light">Chonlasit Wichainpan</p>
                </div>

                <div class="text-[#c9d1d9] text-base leading-relaxed">
                    <p>üöÄ <b>Teacher & Full Stack Dev</b></p>
                    <p class="mt-2 text-[#8b949e]">"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå : ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î"</p>
                </div>

                <button onclick="switchTab('contact')" class="w-full bg-[#21262d] border border-[#30363d] text-white py-1.5 rounded-md font-semibold text-sm hover:bg-[#30363d] hover:border-[#8b949e] transition shadow-sm">
                    Contact Me
                </button>

                <!-- Profile Meta -->
                <div class="text-sm text-[#8b949e] space-y-2 pt-2">
                    <div class="flex items-center gap-2"><i class="fa-solid fa-brands fa-facebook-f w-4 text-center"></i> <a href="https://www.facebook.com/chonlasitgood" target="_blank" class="hover:text-[#58a6ff]">Facebook</a></div>
                    <div class="flex items-center gap-2"><i class="fa-solid fa-brands fa-instagram w-4 text-center"></i> <a href="https://www.instagram.com/ruabai.photo/" target="_blank" class="hover:text-[#58a6ff]">Instagram</a></div>
                    <div class="flex items-center gap-2"><i class="fa-solid fa-envelope w-4 text-center"></i> <a href="mailto:chonlasitgood@gmail.com" class="hover:text-[#58a6ff]">chonlasitgood@gmail.com</a></div>
                    <div class="flex items-center gap-2"><i class="fa-solid fa-globe w-4 text-center"></i> <a href="https://www.kruboat.com" target="_blank" class="hover:text-[#58a6ff]">www.kruboat.com</a></div>
                </div>

                <div class="border-t border-[#30363d] my-4"></div>

                <!-- NEW: Full Tech Stack Sidebar -->
                <div id="sidebar-tech-stack-container">
                    <h3 class="font-bold text-white mb-3 text-sm">Skills & Tech Stack</h3>
                    <div id="sidebar-tech-content" class="space-y-4">
                        <!-- JS will populate full tech stack here -->
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: Main Content -->
            <div class="md:col-span-3">
                
                <!-- Tab Menu -->
                <div class="sticky top-[60px] md:static bg-[#0d1117] z-40 pt-2">
                    <div class="flex gap-6 border-b border-[#30363d] mb-6 overflow-x-auto text-sm hide-scrollbar">
                        <div onclick="switchTab('overview')" id="nav-overview" class="tab-item tab-active py-3 px-1 flex items-center gap-2 whitespace-nowrap">
                            <i class="fa-solid fa-book-bookmark"></i> Overview
                            <!-- NEW: Overview Count Badge -->
                            <span id="overview-badge" class="bg-[#30363d] px-2 rounded-full text-xs py-0.5 text-white hidden">0</span>
                        </div>
                        <div onclick="switchTab('experience')" id="nav-experience" class="tab-item py-3 px-1 flex items-center gap-2 whitespace-nowrap text-[#8b949e]">
                            <i class="fa-solid fa-graduation-cap"></i> Experience <span class="bg-[#30363d] px-2 rounded-full text-xs py-0.5 text-white">6</span>
                        </div>
                        <div onclick="switchTab('contact')" id="nav-contact" class="tab-item py-3 px-1 flex items-center gap-2 whitespace-nowrap text-[#8b949e]">
                            <i class="fa-regular fa-envelope"></i> Contact
                        </div>
                    </div>
                </div>

                <!-- ================= TAB 1: OVERVIEW (Merged Projects) ================= -->
                <div id="tab-overview" class="tab-content block fade-in">
                    
                    <!-- 1. Pinned Projects (Recently Updated) -->
                    <div class="mb-8">
                        <div class="flex justify-between items-end mb-3">
                            <h2 class="text-base text-[#c9d1d9] font-semibold">Pinned (Latest 2 Projects)</h2>
                        </div>
                        
                        <!-- Pinned Grid -->
                        <div id="pinned-projects-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                            <!-- JS Will inject content here -->
                            <div class="col-span-full text-[#8b949e] text-sm animate-pulse">Loading latest projects...</div>
                        </div>
                    </div>

                    <!-- 2. All Projects -->
                    <div class="mb-8">
                        <div class="flex flex-col md:flex-row gap-2 mb-4 items-end md:items-center justify-between">
                            <h2 class="text-base text-[#c9d1d9] font-semibold whitespace-nowrap">All Projects <span class="text-[#8b949e] font-normal" id="project-count-label"></span></h2>
                            <div class="flex gap-2 w-full md:w-auto">
                                <input type="text" id="project-search-input" onkeyup="filterProjects()" placeholder="Find a project..." class="bg-[#0d1117] border border-[#30363d] text-white text-sm rounded-md px-3 py-1.5 w-full md:w-64 focus:border-[#58a6ff] focus:ring-1 focus:ring-[#58a6ff] focus:outline-none placeholder-[#484f58]">
                                <button onclick="filterProjects()" class="bg-[#21262d] border border-[#30363d] text-[#c9d1d9] px-4 py-1.5 rounded-md text-sm font-semibold hover:bg-[#30363d] hover:border-[#8b949e] transition flex items-center gap-2">
                                    Search
                                </button>
                            </div>
                        </div>

                        <div id="project-list" class="space-y-0 border-t border-[#30363d]">
                            <!-- JS Loading... -->
                            <div class="text-center text-[#8b949e] py-12">
                                <i class="fa-solid fa-circle-notch fa-spin text-2xl mb-3 text-[#58a6ff]"></i>
                                <p>Loading projects from Database...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ================= TAB 2: EXPERIENCE (Focused) ================= -->
                <div id="tab-experience" class="tab-content hidden">
                    
                    <div class="readme-container mb-8">
                        <div class="readme-header flex items-center gap-2 text-[#c9d1d9]">
                            <i class="fa-solid fa-list-ul"></i>
                            <span>chonlasitgood / <b>EXPERIENCE.md</b></span>
                        </div>
                        <div class="readme-content bg-[#0d1117]">
                            <h2 class="text-2xl font-bold text-white mb-8 border-b border-[#30363d] pb-4 flex items-center gap-2">
                                <i class="fa-solid fa-briefcase text-[#58a6ff]"></i> Work Experience
                            </h2>
                            <!-- Timeline Injection Point -->
                            <div class="relative pl-4 space-y-10 timeline-line" id="timeline-inject"></div>
                        </div>
                    </div>

                </div>

                <!-- ================= TAB 3: CONTACT ================= -->
                <div id="tab-contact" class="tab-content hidden">
                    <div class="border border-[#30363d] rounded-md bg-[#0d1117]">
                        <div class="bg-[#161b22] px-4 py-3 border-b border-[#30363d] flex justify-between items-center">
                            <h3 class="font-bold text-white">Contact / New Issue</h3>
                            <span class="text-xs text-[#8b949e]">Fill the form to contact me</span>
                        </div>
                        <div class="p-6">
                            <div class="flex gap-4">
                                <!-- Avatar -->
                                <div class="hidden md:block">
                                    <img src="https://firebasestorage.googleapis.com/v0/b/kruboat-web.firebasestorage.app/o/kruboat.com-profile.JPG?alt=media" class="w-10 h-10 rounded-md border border-[#30363d]">
                                </div>
                                
                                <!-- Form Area -->
                                <div class="flex-grow relative">
                                    <div class="absolute top-3 -left-2 w-3 h-3 bg-[#0d1117] border-l border-t border-[#30363d] transform -rotate-45 hidden md:block"></div>
                                    <div class="border border-[#30363d] rounded-md bg-[#0d1117]">
                                        <div class="bg-[#161b22] p-2 border-b border-[#30363d] text-xs text-[#c9d1d9] rounded-t-md">Write</div>
                                        <div class="p-2">
                                            <input type="text" id="contact-name" placeholder="Name" class="w-full bg-transparent border-b border-[#30363d] text-white p-2 focus:border-[#58a6ff] focus:outline-none mb-2 placeholder-[#484f58]">
                                            <textarea id="contact-msg" rows="5" placeholder="Leave a comment (message)..." class="w-full bg-transparent text-white p-2 focus:outline-none placeholder-[#484f58] font-mono text-sm"></textarea>
                                        </div>
                                        <div class="bg-[#161b22] p-2 border-t border-[#30363d] flex justify-between items-center rounded-b-md">
                                            <span class="text-xs text-[#8b949e]"><i class="fa-brands fa-markdown"></i> Markdown supported</span>
                                            <button onclick="sendMessage()" id="btn-send-msg" class="bg-[#238636] hover:bg-[#2ea043] text-white px-4 py-1.5 rounded-md text-sm font-semibold transition border border-[rgba(27,31,36,0.15)] shadow-sm">Send Message</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <footer class="border-t border-[#30363d] py-8 text-center mt-auto bg-[#0d1117]">
        <p class="text-xs text-[#8b949e] font-code">&copy; 2025 KruBoat.com <span class="mx-2">|</span> <span class="text-[#58a6ff]">Built with Love ‚ù§Ô∏è & Coffee ‚òï</span></p>
        <a href="privacy/" class="text-[#8b949e] hover:text-[#c9d1d9] text-xs underline decoration-dotted transition inline-block mt-2">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
    </footer>

    <!-- Logic Script -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy, addDoc, serverTimestamp, limit } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        // Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAlfZHbCFxGK3p3nDoAPy3m9KqZzmX2s9I",
            authDomain: "kruboat-web.firebaseapp.com",
            projectId: "kruboat-web",
            storageBucket: "kruboat-web.firebasestorage.app",
            messagingSenderId: "61868765546",
            appId: "1:61868765546:web:683b18ddf68c89dd317513"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Auto Login Anonymously
        signInAnonymously(auth).catch((error) => {
            console.error("Auth failed:", error);
        });

        // --- Data: Experiences & Tech Stack ---
        const experiences = [
            { year: "2025 - ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô", title: "‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πâ‡∏≤‡∏á ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå", place: "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏ê‡∏¥‡∏ï‡∏ß‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î", colorClass: "text-emerald-400", borderClass: "border-emerald-500", icon: "fa-solid fa-school", tag: "Now" },
            { year: "2025", title: "‡∏Ñ‡∏£‡∏π‡πÄ‡∏≠‡∏Å‡∏ä‡∏ô ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", place: "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏ì‡∏µ‡∏≠‡∏ô‡∏∏‡∏™‡∏£‡∏ì‡πå‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡∏à.‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô", colorClass: "text-blue-400", borderClass: "border-blue-500", icon: "fa-solid fa-chalkboard-user" },
            { year: "2024 - 2025", title: "‡∏ä‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏û ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠ ‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå", place: "RuabaiPhoto", colorClass: "text-pink-400", borderClass: "border-pink-500", icon: "fa-solid fa-camera" },
            { year: "2024", title: "‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ù‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏Ñ‡∏£‡∏π (Computing)", place: "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≤‡∏ò‡∏¥‡∏ï‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô ‡∏ù‡πà‡∏≤‡∏¢‡∏ô‡∏≤‡∏ô‡∏≤‡∏ä‡∏≤‡∏ï‡∏¥", colorClass: "text-cyan-400", borderClass: "border-cyan-500", icon: "fa-solid fa-laptop-code" },
            { 
                year: "2020 - 2024", 
                title: "‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ï‡∏£‡∏µ ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏®‡∏∂‡∏Å‡∏©‡∏≤", 
                place: "‡∏Ñ‡∏ì‡∏∞‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô", 
                colorClass: "text-purple-400", 
                borderClass: "border-purple-500", 
                icon: "fa-solid fa-user-graduate", 
                tag: "‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ô‡∏¥‡∏¢‡∏°‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1 üèÜ" 
            },
            { year: "2020", title: "‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏õ‡∏•‡∏≤‡∏¢", place: "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢ ‡∏à.‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î", colorClass: "text-gray-400", borderClass: "border-gray-500", icon: "fa-solid fa-building-columns" }
        ];

        const techStack = [
            { category: "Web Dev", icon: "fa-solid fa-globe", skills: [
                { name: "üåê HTML5/CSS3", color: "text-orange-400" }, 
                { name: "‚ö° JavaScript", color: "text-yellow-400" }, 
                { name: "üêç Python", color: "text-blue-400" }, 
                { name: "üêò PHP", color: "text-indigo-400" }, 
                { name: "üê¨ MySQL", color: "text-cyan-400" }, 
                { name: "üìù WordPress", color: "text-white" }
            ]},
            { category: "Cloud & Data", icon: "fa-solid fa-cloud", skills: [
                { name: "üìú Apps Script", color: "text-green-400" }, 
                { name: "üî• Firebase", color: "text-yellow-500" }, 
                { name: "üìä Google Sheet", color: "text-emerald-400" },
                { name: "üìà Google Analytics", color: "text-orange-300" }
            ]},
            { category: "IoT & Network", icon: "fa-solid fa-network-wired", skills: [
                { name: "üîå TCP/IP", color: "text-cyan-300" }, 
                { name: "üîê Captive Portal", color: "text-teal-400" },
                { name: "üìπ IP Camera", color: "text-blue-300" },
                { name: "üì° Mikrotik", color: "text-gray-400" }, 
                { name: "ü§ñ Arduino / IoT", color: "text-pink-400" },
                { name: "üè† IoT Setup", color: "text-blue-300" }
            ]},
            { category: "Tools & Creative", icon: "fa-solid fa-palette", skills: [
                { name: "üé® Photoshop", color: "text-blue-500" }, 
                { name: "üé¨ Premiere", color: "text-purple-500" }, 
                { name: "üé• OBS Studio", color: "text-white" },
                { name: "üêô GitHub", color: "text-gray-300" }, 
                { name: "üíª VS Code", color: "text-blue-400" },
                { name: "üñåÔ∏è Canva", color: "text-cyan-400" }
            ]}
        ];

        let isExperienceRendered = false;

        // --- 1. Tab Switching ---
        window.switchTab = (tabName) => {
            document.querySelectorAll('.tab-content').forEach(el => { el.classList.add('hidden'); el.classList.remove('block', 'fade-in'); });
            document.querySelectorAll('.tab-item').forEach(el => { el.classList.remove('tab-active', 'text-[#c9d1d9]', 'font-semibold'); el.classList.add('text-[#8b949e]'); });
            const content = document.getElementById(`tab-${tabName}`);
            content.classList.remove('hidden'); content.classList.add('block', 'fade-in');
            const nav = document.getElementById(`nav-${tabName}`);
            nav.classList.add('tab-active', 'text-[#c9d1d9]'); nav.classList.remove('text-[#8b949e]');
            if(tabName === 'experience') renderExperience();
            // Load projects on overview too since it's merged
            if(tabName === 'overview') loadProjects();
        }

        // --- 2. Render Functions ---
        function renderExperience() {
            if (isExperienceRendered) return;
            const tlContainer = document.getElementById('timeline-inject');
            // Clean Style
            tlContainer.className = "relative border-l-2 border-[#30363d] ml-3 space-y-8 pb-4";
            
            if(tlContainer && tlContainer.children.length === 0) {
                let tlHtml = '';
                experiences.forEach(exp => {
                    const tagHtml = exp.tag ? `<span class="ml-2 px-2 py-0.5 rounded-md border border-[#30363d] bg-[#161b22] text-xs ${exp.colorClass} font-mono inline-block">${exp.tag}</span>` : '';
                    tlHtml += `
                    <div class="relative pl-6 group">
                        <!-- Dot -->
                        <div class="absolute -left-[9px] top-0 w-5 h-5 rounded-full bg-[#0d1117] border-2 border-[#30363d] flex items-center justify-center group-hover:border-[#58a6ff] transition">
                            <i class="${exp.icon} text-[10px] ${exp.colorClass}"></i>
                        </div>
                        
                        <!-- Content -->
                        <div class="flex flex-col sm:flex-row sm:items-baseline sm:gap-2">
                            <h3 class="font-bold text-[#c9d1d9] text-base group-hover:text-[#58a6ff] transition cursor-default">${exp.title}</h3>
                            ${tagHtml}
                        </div>
                        
                        <div class="text-[#8b949e] text-sm mt-1">
                            ${exp.place}
                        </div>
                        <div class="text-[#8b949e] text-xs font-mono mt-1 opacity-75">
                            <i class="fa-regular fa-calendar mr-1"></i> ${exp.year}
                        </div>
                    </div>`;
                });
                tlContainer.innerHTML = tlHtml;
                isExperienceRendered = true;
            }
        }

        function renderSidebarTechStack() {
            const container = document.getElementById('sidebar-tech-content');
            let html = '';
            techStack.forEach(cat => {
                const skills = cat.skills.map(s => `<span class="text-[11px] border border-[#30363d] bg-[#161b22] px-2 py-1 rounded-md ${s.color} font-mono hover:bg-[#21262d] transition cursor-default whitespace-nowrap">${s.name}</span>`).join('');
                html += `
                <div class="mb-1">
                    <div class="flex items-center gap-2 mb-1.5 text-xs text-[#8b949e] font-semibold">
                        <i class="${cat.icon}"></i> ${cat.category}
                    </div>
                    <div class="flex flex-wrap gap-1.5">${skills}</div>
                </div>`;
            });
            container.innerHTML = html;
        }

        // --- 3. Firebase Functions ---
        
        window.filterProjects = () => {
            const input = document.getElementById('project-search-input');
            const filter = input.value.toLowerCase();
            const listContainer = document.getElementById('project-list');
            const projects = listContainer.getElementsByClassName('project-item');

            Array.from(projects).forEach(project => {
                const title = project.getAttribute('data-title').toLowerCase();
                if (title.indexOf(filter) > -1) {
                    project.style.display = "";
                } else {
                    project.style.display = "none";
                }
            });
        }

        async function loadProjects() {
            const listContainer = document.getElementById('project-list');
            const pinnedContainer = document.getElementById('pinned-projects-grid');

            if(listContainer.children.length > 1) return; // Prevent reload if already loaded

            try {
                // Fetch All projects first
                const q = query(collection(db, "projects"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);
                
                // Update Content Count Label (All Projects (N))
                const countBadge = document.getElementById('project-count-label');
                if(countBadge) countBadge.innerText = `(${querySnapshot.size})`;

                // Update Overview Tab Badge
                const tabBadge = document.getElementById('overview-badge');
                if(tabBadge) {
                    tabBadge.innerText = querySnapshot.size;
                    tabBadge.classList.remove('hidden');
                }
                
                if (querySnapshot.empty) { 
                    listContainer.innerHTML = '<div class="text-center text-[#8b949e] py-12">No public projects found in "projects" collection.</div>'; 
                    pinnedContainer.innerHTML = '<div class="col-span-full text-center text-[#8b949e] py-8">No pinned projects available.</div>';
                    return; 
                }

                let allHtml = '';
                let pinnedHtml = '';
                let count = 0;

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const tagColor = data.tagColor || 'bg-gray-500';
                    const category = data.category || 'General';
                    let lastUpdate = data.createdAt?.toDate ? data.createdAt.toDate().toLocaleDateString('en-GB') : 'Recently';
                    
                    // --- 1. PINNED (Take first 2 latest) ---
                    if(count < 2) {
                        pinnedHtml += `
                        <div onclick="window.open('${data.link || '#'}', '_blank')" class="repo-card bg-[#0d1117] border border-[#30363d] rounded-md p-4 flex flex-col justify-between h-32 hover:bg-[#161b22] transition cursor-pointer">
                            <div>
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-[#58a6ff] font-bold hover:underline flex items-center gap-2 font-mono">
                                        <i class="fa-solid fa-book-bookmark text-[#8b949e]"></i> ${data.title}
                                    </span>
                                    <span class="text-[10px] border border-[#30363d] text-[#8b949e] px-2 py-0.5 rounded-full">Public</span>
                                </div>
                                <p class="text-xs text-[#8b949e] line-clamp-2">${data.description || ''}</p>
                            </div>
                            <div class="flex items-center gap-4 text-xs text-[#8b949e]">
                                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full ${tagColor}"></span> ${category}</span>
                            </div>
                        </div>`;
                    }

                    // --- 2. ALL LIST ---
                    allHtml += `
                    <div class="project-item border-b border-[#30363d] py-6 flex justify-between items-start group hover:bg-[#161b22]/40 px-2 transition -mx-2 rounded-md" data-title="${data.title}">
                        <div class="w-full">
                            <div class="flex items-center gap-2 mb-1">
                                <a href="${data.link || '#'}" target="_blank" class="text-lg font-bold text-[#58a6ff] hover:underline font-code">${data.title}</a>
                                <span class="text-[10px] border border-[#30363d] text-[#8b949e] px-2 py-0.5 rounded-full uppercase">Public</span>
                            </div>
                            <p class="text-[#8b949e] text-sm mb-4 max-w-2xl">${data.description || 'No description provided.'}</p>
                            <div class="flex flex-wrap items-center gap-4 text-xs text-[#8b949e]">
                                <div class="flex items-center gap-1.5"><span class="w-3 h-3 rounded-full ${tagColor}"></span> ${category}</div>
                                <div>Updated ${lastUpdate}</div>
                            </div>
                        </div>
                    </div>`;

                    count++;
                });

                listContainer.innerHTML = allHtml;
                pinnedContainer.innerHTML = pinnedHtml;

            } catch (error) { 
                console.error("FB Error:", error); 
                listContainer.innerHTML = '<div class="text-center text-red-400 py-4">Failed to load.</div>'; 
                pinnedContainer.innerHTML = '<div class="col-span-full text-center text-red-400">Failed to load pinned projects.</div>';
            }
        }

        window.sendMessage = async () => {
            const name = document.getElementById('contact-name').value.trim();
            const msg = document.getElementById('contact-msg').value.trim();
            const btn = document.getElementById('btn-send-msg');
            
            if (!auth.currentUser) {
                alert("Authenticating... please wait a moment and try again.");
                try {
                    await signInAnonymously(auth);
                } catch (e) {
                    alert("Authentication failed. Cannot send message.");
                    return;
                }
            }

            if (!name || !msg) return alert("Please fill in all fields.");
            
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Sending...'; 
            btn.disabled = true;
            
            try {
                await addDoc(collection(db, "messages"), { name, message: msg, timestamp: serverTimestamp(), read: false });
                alert("Message sent successfully! (Issue Created)");
                document.getElementById('contact-name').value = ''; 
                document.getElementById('contact-msg').value = '';
            } catch (error) { 
                console.error("Error: ", error); 
                alert("Failed to send message: " + error.message); 
            } finally { 
                btn.innerHTML = originalText; 
                btn.disabled = false; 
            }
        }

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            renderSidebarTechStack();
            loadProjects(); 
            renderExperience(); 
        });
    </script>
</body>
</html>